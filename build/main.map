{"version":3,"sources":["webpack:///webpack/bootstrap a683a76b933516550831","webpack:///external \"mongoose\"","webpack:///./~/babel-runtime/regenerator/index.js","webpack:///external \"koa-router\"","webpack:///./nuxt.config.js","webpack:///./server/routes/api.js","webpack:///./server/routes/home.js","webpack:///external \"koa\"","webpack:///external \"koa-bodyparser\"","webpack:///external \"koa-session\"","webpack:///external \"nuxt\"","webpack:///./server/database/schema/address.js","webpack:///./server/database/schema/evaluation.js","webpack:///./server/database/schema/feedback.js","webpack:///./server/database/schema/user.js","webpack:///external \"regenerator-runtime\"","webpack:///./server/index.js"],"names":["module","exports","head","title","meta","charset","name","content","hid","link","rel","type","href","plugins","src","ssr","css","lang","loading","color","build","vendor","loaders","test","loader","query","limit","extend","config","ctx","mongoose","model","User","router","post","next","request","body","tel","password","findOne","exec","user","session","authUser","_id","err","msg","code","pw","isTel","save","update","Feedback","Evaluation","Address","home","sleep","Promise","setTimeout","resolve","time","feedback","get","couponGroup","limit_name","limit_other_name","money","userful_life","timeStarNum","attitudeStarNum","qualityStarNum","tags","userId","evaluation","find","count","populate","path","list","hasPay","payTime","statusText","typeName","address","page","pages","Math","ceil","length","start","min","end","slice","all","gender","city","isDefault","multi","addressNew","id","li","console","log","params","redirect","sort","remove","AddressSchema","Schema","String","Types","ObjectId","ref","EvaluationSchema","Number","Array","addTime","Date","default","FeedbackSchema","UserSchema","app","host","process","env","HOST","port","use","bodyParser","require","dev","nuxt","builder","keys","CONFIG","key","maxAge","overwrite","httpOnly","signed","rolling","auth","routes","status","req","reject","res","on","render","promise","then","catch","listen","set","connect","useNewUrlParser","connection"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 15);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap a683a76b933516550831","module.exports = require(\"mongoose\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mongoose\"\n// module id = 0\n// module chunks = 0","module.exports = require(\"regenerator-runtime\");\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/babel-runtime/regenerator/index.js\n// module id = 1\n// module chunks = 0","module.exports = require(\"koa-router\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-router\"\n// module id = 2\n// module chunks = 0","module.exports = {\n  /*\n  ** Headers of the page\n  */\n  head: {\n    title: 'starter',\n    meta: [\n      { charset: 'utf-8' },\n      { name: 'viewport', content: 'width=device-width, initial-scale=1,maximum-scale=1.0,user-scalable=0,minimum-scale=1.0' },\n      { hid: 'description', name: 'description', content: 'Nuxt.js project' }\n    ],\n    link: [\n      { rel: 'icon', type: 'image/x-icon', href: '/favicon.ico' }\n    ],\n\n  },\n  plugins: [\n    /*\n    ** 这样引入的js会照成html肉眼能看到的重绘，直接在模版引入\n    */\n    {src: '~plugins/flexible.js',ssr: false},\n    {src: '~plugins/mint-ui',ssr: false},\n  ],\n  /*\n  ** Global CSS\n  */\n  css: [\n    {\n      src: '~assets/sass/base.sass',\n      lang: 'sass?indentedSyntax=true'\n    },\n    {\n      src: 'mint-ui/lib/style.css'\n    },\n  ],\n  /*\n  ** Customize the progress-bar color\n  */\n  loading: { color: '#036EB8' },\n  /*\n   ** Build configuration\n   */\n  build: {\n    vendor: [\n      \"axios\"\n    ],\n    loaders: [\n      {\n        test: /\\.(png|jpe?g|gif|svg)$/,\n        loader: 'url-loader',\n        query: {\n          limit: 10000,\n          name: 'img/[name].[hash].[ext]'\n        }\n      }\n    ],\n    /*\n     ** Run ESLINT on save\n     */\n    extend (config, ctx) {\n\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./nuxt.config.js","import Router from 'koa-router'\nimport mongoose from \"mongoose\" \nimport { UserSchema } from \"../database/schema/user\"\n\nmongoose.model('User', UserSchema)\nconst User = mongoose.model('User')\n\nconst router = new Router()\n\n\nrouter.post('/api/login',async(ctx, next) =>{\n\tconst {tel, password} = ctx.request.body;\n\tvar user = await User.findOne({ name: tel, password: password }).exec()\n\tif(user){    \n\t\tctx.session.authUser = {\n\t\t\tuser: tel,\n\t\t\t_id: user._id\n\t\t}\n\n\t\treturn (ctx.body = {\n\t\t\terr: 0,\n\t\t\tuser: {\n\t\t\t\tuser: tel,\n\t\t\t\t_id: user._id\n\t\t\t}\n\t\t})\n\t}\n\n\treturn (ctx.body = {\n\t\terr: 1,\n\t\tmsg: '账号或密码错误'\n\t})\n})\nrouter.post('/api/logout',async(ctx, next) =>{\n\tctx.session.authUser = null\n\treturn (ctx.body = {\n\t\terr: 0,\n\t})\n})\nrouter.post('/api/register',async (ctx, next) => {\n\tconst {tel, code, pw} = ctx.request.body\n\tconst isTel = await User.findOne({ name: tel}).exec()\n\tif(isTel){\n\t\treturn (ctx.body = {\n\t\t\terr: 1,\n\t\t\tmsg: '号码已存在'\n\t\t})\n\t}\n\tif(code != 666666){\n\t\treturn (ctx.body = {\n\t\t\terr: 2,\n\t\t\tmsg: '验证码不正确'\n\t\t})\n\t}\n\n\tconst user = new User({\n\t\tname: tel,\n\t\tpassword: pw\n\t})\n\tawait user.save()\n\n\tctx.session.authUser = tel\n\n\treturn  (ctx.body = {\n\t\terr: 0,\n\t\tmsg: '注册成功',\n\t\tuser: tel\n\t})\n\n})\n\nrouter.post('/api/reset_pw_step1',async (ctx, next) => {\n\tconst {tel, code} = ctx.request.body\n\n\tvar isTel = await User.findOne({ name: tel}).exec()\n\tif(!isTel){\n\t\treturn (ctx.body = {\n\t\t\terr: 1,\n\t\t\tmsg: '号码不存在'\n\t\t}) \n\t}\n\tif(code != 666666){\n\t\treturn (ctx.body = {\n\t\t\terr: 2,\n\t\t\tmsg: '验证码不正确'\n\t\t})\n\t}\n\n\treturn (ctx.body = {\n\t\terr: 0,\n\t\tmsg: 'success'\n\t})\n\n})\nrouter.post('/api/reset_pw_step2',async (ctx, next) => {\n\tconst {tel,code,pw} = ctx.request.body\n\n\tvar isTel = await User.findOne({ name: tel}).exec()\n\tif(!isTel){\n\t\treturn (ctx.body = {\n\t\t\terr: 1,\n\t\t\tmsg: '页面信息失效,请返回上一页'\n\t\t})\n\t}\n\tif(code != 666666){\n\t\treturn (ctx.body = {\n\t\t\terr: 2,\n\t\t\tmsg: '页面信息失效,请返回上一页'\n\t\t})\n\t}\n\n\tawait User.findOne({ name: tel }).update({ password: pw }).exec()\n\n\n\treturn (ctx.body = {\n\t\terr: 0,\n\t\tmsg: 'success'\n\t})\n\n})\n\nexport { router }\n\n\n// WEBPACK FOOTER //\n// ./server/routes/api.js","import Router from 'koa-router'\nimport mongoose from \"mongoose\" \nimport { FeedbackSchema } from \"../database/schema/feedback\"\nimport { EvaluationSchema } from \"../database/schema/evaluation\"\nimport { AddressSchema } from \"../database/schema/address\"\n\nmongoose.model('Feedback', FeedbackSchema)\nconst Feedback = mongoose.model('Feedback')\n\nmongoose.model('Evaluation', EvaluationSchema)\nconst Evaluation = mongoose.model('Evaluation')\n\nmongoose.model('Address', AddressSchema)\nconst Address = mongoose.model('Address')\n\nconst home = new Router()\nconst sleep = time => new Promise(resolve => setTimeout(resolve, time))\n\nhome.post('/api/feedback/post', async (ctx, next) => {\n\tconst {content, tel} = ctx.request.body;\n\n\tconst feedback = new Feedback({\n\t\tcontent,\n\t\ttel\n\t})\n\n\tawait feedback.save()\n\t\n\treturn (ctx.body = {\n\t\terr: 0,\n\t\tmsg: '评论成功'\n\t})\n\n})\n\nhome.get('/api/coupon/get', async (ctx, next) => {\n\tlet couponGroup = [\n\t\t{\n\t\t\tlimit_name: '仅限单次·居家保洁',\n\t\t\tlimit_other_name: '新用户专享',\n\t\t\ttype: 0,\n\t\t\tmoney: 10,\n\t\t\tuserful_life: '2018-07-02'\n\n\t\t},\n\t\t{\n\t\t\tlimit_name: '全品类通用',\n\t\t\tlimit_other_name: '新用户专享',\n\t\t\ttype: 0,\n\t\t\tmoney: 160,\n\t\t\tuserful_life: '2018-07-02'\n\n\t\t},\n\t\t{\n\t\t\tlimit_name: '全品类通用',\n\t\t\tlimit_other_name: '新用户专享',\n\t\t\ttype: 1,\n\t\t\tmoney: 160,\n\t\t\tuserful_life: '2018-07-02'\n\n\t\t},\n\t\t{\n\t\t\tlimit_name: '全品类通用',\n\t\t\tlimit_other_name: '新用户专享',\n\t\t\ttype: 2,\n\t\t\tmoney: 160,\n\t\t\tuserful_life: '2018-07-02'\n\n\t\t},\n\t]\n\n\t//await sleep(2000)\t\n\treturn ctx.body = couponGroup\n\t\n\n})\n\nhome.post('/api/evaluation/post', async (ctx, next) => {\n\tconst {timeStarNum,attitudeStarNum,qualityStarNum,tags,content} = ctx.request.body;\n\n\t\n\t/*\n\t**\n\t\tif(!ctx.session.authUser){\n\t\t\tthrow new Error('用户不存在')\n\t\t\treturn\t\n\t\t}\n\t**\n\t*/\n\n\tconst userId = ctx.session.authUser._id;\n\n\tconst evaluation = new Evaluation({\n\t\ttimeStarNum,\n\t\tattitudeStarNum,\n\t\tqualityStarNum,\n\t\ttags,\n\t\tcontent,\n\t\tuser: userId\n\t})\n\n\tawait evaluation.save()\n\n\treturn (ctx.body = {\n\t\terr: 0,\n\t\tmsg: '评论成功'\n\t})\n\n})\n\nhome.post('/api/evaluations/get', async (ctx, next) => {\n\tlet count = await Evaluation.find().count().exec()\n\n\tlet list = await Evaluation.find().populate({path: 'user'}).exec()\n\treturn ctx.body = {\n\t\terr: 0,\n\t\tmsg: '获取成功',\n\t\tlist,\n\t\tcount\n\t}\n})\n\n\n\nhome.post('/api/hasPayList/get', async (ctx, next) => {\n\tlet hasPay = [{\n\t\t\t\tpayTime: '2018-07-03 22:01:25',\n\t\t\t\tstatusText: '待分配',\n\t\t\t\ttypeName: '单次·居家保洁',\n\t\t\t\taddress: '市辖区世纪大道恒大山水城1…',\n\t\t\t\ttype: 0\n\t\t\t},\n\t\t\t{\n\t\t\t\tpayTime: '2018-07-03 22:01:25',\n\t\t\t\tstatusText: '待分配',\n\t\t\t\ttypeName: '单次·居家保洁',\n\t\t\t\taddress: '市辖区世纪大道恒大山水城2…',\n\t\t\t\ttype: 0\n\t\t\t},\n\t\t\t{\n\t\t\t\tpayTime: '2018-07-03 22:01:25',\n\t\t\t\tstatusText: '待分配',\n\t\t\t\ttypeName: '单次·居家保洁',\n\t\t\t\taddress: '市辖区世纪大道恒大山水城3…',\n\t\t\t\ttype: 0\n\t\t\t},\n\t\t\t{\n\t\t\t\tpayTime: '2018-07-03 22:01:25',\n\t\t\t\tstatusText: '待分配',\n\t\t\t\ttypeName: '单次·居家保洁',\n\t\t\t\taddress: '市辖区世纪大道恒大山水城4…',\n\t\t\t\ttype: 0\n\t\t\t},\n\t\t\t{\n\t\t\t\tpayTime: '2018-07-03 22:01:25',\n\t\t\t\tstatusText: '待分配',\n\t\t\t\ttypeName: '单次·居家保洁',\n\t\t\t\taddress: '市辖区世纪大道恒大山水城5…',\n\t\t\t\ttype: 0\n\t\t\t},\n\t\t\t{\n\t\t\t\tpayTime: '2018-07-03 22:01:25',\n\t\t\t\tstatusText: '待分配',\n\t\t\t\ttypeName: '单次·居家保洁',\n\t\t\t\taddress: '市辖区世纪大道恒大山水城6…',\n\t\t\t\ttype: 0\n\t\t\t},\n\t\t\t{\n\t\t\t\tpayTime: '2018-07-03 22:01:25',\n\t\t\t\tstatusText: '待分配',\n\t\t\t\ttypeName: '单次·居家保洁',\n\t\t\t\taddress: '市辖区世纪大道恒大山水城7…',\n\t\t\t\ttype: 0\n\t\t\t}];\n\n\tlet {page,limit} = ctx.request.body\n\tpage = page ? page : 0\n\tlimit = limit ? limit : 4\n\n\tlet pages = Math.ceil(hasPay.length / limit)\n\n\tlet start = Math.min(page,pages-1) * limit\n\tlet end = Math.min(start + limit, hasPay.length)\n\n\thasPay = hasPay.slice(start, end)\n\t//await sleep(2000)\n\n\tif(page > pages - 1){\n\t\treturn (ctx.body = {\n\t\t\terr: 1,\n\t\t\tmsg: '已经到最后一页了',\n\t\t\tpages\n\t\t})\n\t}else{\n\t\treturn (ctx.body = {\n\t\t\terr: 0,\n\t\t\tmsg: '获取成功',\n\t\t\tpages,\n\t\t\thasPay\n\t\t})\n\t}\n\n})\n\nhome.post('/api/allList/get', async (ctx, next) => {\n\t//serviceType 0 未服务待分配 1 未服务已分配 2 已取消 3 已服务 4 进行中 5 待支付\n\tlet all = [{\n\t\t\t\tpayTime: '2018-07-03 22:01:25',\n\t\t\t\tstatusText: '待支付',\n\t\t\t\ttypeName: '单次·居家保洁',\n\t\t\t\taddress: '市辖区世纪大道恒大山水城1…',\n\t\t\t\ttype: 5\n\t\t\t},\n\t\t\t{\n\t\t\t\tpayTime: '2018-07-03 22:01:25',\n\t\t\t\tstatusText: '已取消',\n\t\t\t\ttypeName: '单次·居家保洁',\n\t\t\t\taddress: '市辖区世纪大道恒大山水城2…',\n\t\t\t\ttype: 2\n\t\t\t},\n\t\t\t{\n\t\t\t\tpayTime: '2018-07-03 22:01:25',\n\t\t\t\tstatusText: '待分配',\n\t\t\t\ttypeName: '单次·居家保洁',\n\t\t\t\taddress: '市辖区世纪大道恒大山水城3…',\n\t\t\t\ttype: 0\n\t\t\t},\n\t\t\t{\n\t\t\t\tpayTime: '2018-07-03 22:01:25',\n\t\t\t\tstatusText: '待分配',\n\t\t\t\ttypeName: '单次·居家保洁',\n\t\t\t\taddress: '市辖区世纪大道恒大山水城4…',\n\t\t\t\ttype: 0\n\t\t\t},\n\t\t\t{\n\t\t\t\tpayTime: '2018-07-03 22:01:25',\n\t\t\t\tstatusText: '待分配',\n\t\t\t\ttypeName: '单次·居家保洁',\n\t\t\t\taddress: '市辖区世纪大道恒大山水城5…',\n\t\t\t\ttype: 0\n\t\t\t},\n\t\t\t{\n\t\t\t\tpayTime: '2018-07-03 22:01:25',\n\t\t\t\tstatusText: '待支付',\n\t\t\t\ttypeName: '单次·居家保洁',\n\t\t\t\taddress: '市辖区世纪大道恒大山水城6…',\n\t\t\t\ttype: 5\n\t\t\t},\n\t\t\t{\n\t\t\t\tpayTime: '2018-07-03 22:01:25',\n\t\t\t\tstatusText: '待分配',\n\t\t\t\ttypeName: '单次·居家保洁',\n\t\t\t\taddress: '市辖区世纪大道恒大山水城7…',\n\t\t\t\ttype: 0\n\t\t\t}];\n\n\tlet {page,limit} = ctx.request.body\n\tpage = page ? page : 0\n\tlimit = limit ? limit : 4\n\n\tlet pages = Math.ceil(all.length / limit)\n\n\tlet start = Math.min(page,pages-1) * limit\n\tlet end = Math.min(start + limit, all.length)\n\n\tall = all.slice(start, end)\n\t//await sleep(2000)\n\n\tif(page > pages - 1){\n\t\treturn (ctx.body = {\n\t\t\terr: 1,\n\t\t\tmsg: '已经到最后一页了',\n\t\t\tpages\n\t\t})\n\t}else{\n\t\treturn (ctx.body = {\n\t\t\terr: 0,\n\t\t\tmsg: '获取成功',\n\t\t\tpages,\n\t\t\tall\n\t\t})\n\t}\n\n})\n\nhome.post('/api/address/post', async (ctx, next) => {\n\tconst {name,gender,tel,city,address,isDefault} = ctx.request.body;\n\n\tconst userId = ctx.session.authUser._id;\n\n\tif(isDefault){\n\t\tawait Address.update({user:userId},{isDefault:false},{multi:true}).exec()\n\t}\n\n\tconst addressNew = new Address({\n\t\tname,\n\t\tgender,\n\t\ttel,\n\t\tcity,\n\t\taddress,\n\t\tisDefault,\n\t\tuser: userId\n\t})\n\ttry{\n\t\tawait addressNew.save()\n\t} catch(e) {\n\n\t\treturn (ctx.body = {\n\t\t\terr: 1,\n\t\t\tmsg: e\n\t\t})\n\t}\n\n\treturn (ctx.body = {\n\t\terr: 0,\n\t\tmsg: '地址保存成功'\n\t})\n\n})\nhome.post('/api/address/get', async (ctx, next) => {\n\tconst { id } = ctx.request.body\n\n\tconst li = await Address.find({ _id:id }).exec()\n\treturn ctx.body = {\n\t\terr: 0,\n\t\tmsg: \"获取成功\",\n\t\tli\n\t}\n})\nhome.post('/api/address/update', async (ctx, next) => {\n\n\tconst {name,gender,tel,city,address,isDefault,id} = ctx.request.body;\n\n\tconst userId = ctx.session.authUser._id;\n\n\tconsole.log(ctx.params.id)\n\n\tif(isDefault){\n\t\tawait Address.update({user:userId},{isDefault:false},{multi:true}).exec()\n\t}\n\n\tawait Address.update({_id:id},{\n\t\tname,\n\t\tgender,\n\t\ttel,\n\t\tcity,\n\t\taddress,\n\t\tisDefault,\n\t}).exec()\n\n\treturn (ctx.body = {\n\t\terr: 0,\n\t\tmsg: '地址更新成功'\n\t})\n})\nhome.get('/api/addressList/get', async (ctx, next) => {\n\tif(!ctx.session.authUser){\t\t\n\t\treturn ctx.redirect('/')\n\t}\n\n\tconst userId = ctx.session.authUser._id;\n\n\tconst list = await Address.find({user:userId}).sort({isDefault:-1}).exec()\n\n\treturn (ctx.body = {\n\t\terr: 0,\n\t\tmsg: \"获取成功\",\n\t\tlist\n\t})\n\n})\n\nhome.post('/api/addressList/setDefault', async (ctx, next) => {\n\tconst { id } = ctx.request.body\n\n\tif(!ctx.session.authUser){\t\t\n\t\t\n\t}\n\n\tconst userId = ctx.session.authUser._id;\n\tawait Address.update({user:userId},{isDefault:false},{multi:true}).exec()\n\n\tlet li = await Address.update({_id:id},{isDefault:true}).exec()\n\tconst list = await Address.find({user:userId}).sort({isDefault:-1}).exec()\n\n\treturn (ctx.body = {\n\t\terr: 0,\n\t\tmsg: \"设置默认地址成功\",\n\t\tli,\n\t\tlist\n\t})\n\n})\nhome.post('/api/addressList/cancel', async (ctx, next) => {\n\tconst { id } = ctx.request.body\n\n\tif(!ctx.session.authUser){\t\t\n\t\t\n\t}\n\n\tconst userId = ctx.session.authUser._id;\n\n\tlet li = await Address.remove({_id:id}).exec();\n\n\tconst list = await Address.find({user:userId}).sort({isDefault:-1}).exec()\n\n\tawait sleep(2000)\n\treturn (ctx.body = {\n\t\terr: 0,\n\t\tmsg: \"删除地址成功\",\n\t\tli,\n\t\tlist\n\t})\n\n})\n\n\n\n\n\nexport { home }\n\n\n// WEBPACK FOOTER //\n// ./server/routes/home.js","module.exports = require(\"koa\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa\"\n// module id = 6\n// module chunks = 0","module.exports = require(\"koa-bodyparser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-bodyparser\"\n// module id = 7\n// module chunks = 0","module.exports = require(\"koa-session\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-session\"\n// module id = 8\n// module chunks = 0","module.exports = require(\"nuxt\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"nuxt\"\n// module id = 9\n// module chunks = 0","import mongoose from \"mongoose\"\n\n\nconst AddressSchema = new mongoose.Schema({\n    name: String,\n    gender: String,\n    tel: String,\n    city: String,\n    address: String,\n    isDefault: false,\n    user: {\n        type: mongoose.Schema.Types.ObjectId,\n        ref: 'User'\n    },\n})\n\nexport {\n\tAddressSchema\n}\n\n\n// WEBPACK FOOTER //\n// ./server/database/schema/address.js","import mongoose from \"mongoose\"\n\nconst EvaluationSchema = new mongoose.Schema({\n    timeStarNum: Number,\n    attitudeStarNum: Number,\n    qualityStarNum: Number,\n    tags: Array,\n    content: String,\n    addTime: {\n        type: Date,\n        default: new Date()\n    },\n    user: {\n        type: mongoose.Schema.Types.ObjectId,\n        ref: 'User'\n    },\n})\n\nexport {\n\tEvaluationSchema\n}\n\n\n// WEBPACK FOOTER //\n// ./server/database/schema/evaluation.js","import mongoose from \"mongoose\"\n\n\nconst FeedbackSchema = new mongoose.Schema({\n    content: String,\n    tel: String,\n    addTime: {\n        type: Date,\n        default: new Date()\n\n    },\n})\n\nexport {\n\tFeedbackSchema\n}\n\n\n// WEBPACK FOOTER //\n// ./server/database/schema/feedback.js","import mongoose from \"mongoose\"\n\n\nconst UserSchema = new mongoose.Schema({\n    name: String,\n    password: String\n})\n\nexport {\n\tUserSchema\n}\n\n\n// WEBPACK FOOTER //\n// ./server/database/schema/user.js","module.exports = require(\"regenerator-runtime\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"regenerator-runtime\"\n// module id = 14\n// module chunks = 0","import Koa from 'koa'\nimport { Nuxt, Builder } from 'nuxt'\nimport bodyParser from \"koa-bodyparser\"\nimport session from \"koa-session\"\nimport mongoose from \"mongoose\" \nimport { router } from \"./routes/api\"\nimport { home } from \"./routes/home\"\n\n\nconst auth = async (ctx, next) => {\n  await next()\n}\n\nasync function start () {\n  const app = new Koa()\n  const host = process.env.HOST || '127.0.0.1'\n  const port = process.env.HOST || 7000\n\n  app.use(bodyParser())\n\n  // Import and Set Nuxt.js options\n  let config = require('../nuxt.config.js')\n  config.dev = !(app.env === 'production')\n\n  // Instantiate nuxt.js\n  const nuxt = new Nuxt(config)\n\n  // Build in development\n  if (config.dev) {\n    const builder = new Builder(nuxt)\n    await builder.build()\n  }\n\n  app.keys = ['some session']\n\n  const CONFIG = {\n    key: \"SESSION\",\n    maxAge: 86400000,\n    overwrite: true,\n    httpOnly: true,\n    signed: true,\n    rolling: false\n  }\n  app.use(session(CONFIG, app))\n\n  app.use(auth)\n  app.use(router.routes())\n  app.use(home.routes())\n\n  app.use(async (ctx, next) => {\n    await next()\n    ctx.status = 200 // koa defaults to 404 when it sees that status is unset\n    ctx.req.session = ctx.session\n    return new Promise((resolve, reject) => {\n      ctx.res.on('close', resolve)\n      ctx.res.on('finish', resolve)\n      nuxt.render(ctx.req, ctx.res, promise => {\n        // nuxt.render passes a rejected promise into callback on error.\n        promise.then(resolve).catch(reject)\n      })\n    })\n  })\n  \n\n  app.listen(port, host)\n  console.log('Server listening on :' + host + \":\" + port) // eslint-disable-line no-console\n\n  mongoose.Promise = Promise\n  mongoose.set('debug',true)\n  mongoose.connect('mongodb://localhost:27017/qinghe',{\n    useNewUrlParser: true\n  })\n    \n  mongoose.connection.on('open',async () => {\n    console.log('mongodb opened!')\n  })\n\n}\n\nstart()\n\n\n\n// WEBPACK FOOTER //\n// ./server/index.js"],"sourceRoot":""}